<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì˜ìˆ˜ì¦ ëª©ë¡ - Retrip</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background-color: #f5f5f5;
      padding: 20px;
    }

    .header {
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .back-btn {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      margin-bottom: 10px;
    }
    .header h1 {
      font-size: 24px;
      color: #007bff;
      margin-bottom: 10px;
    }
    .travel-info {
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }
    .travel-amount {
      font-size: 20px;
      font-weight: bold;
      color: #28a745;
      margin-top: 10px;
    }

    .section-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
      margin-top: 30px;
    }

    .receipt-card {
      background-color: #e8e8e8;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 15px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .receipt-card:hover {
      background-color: #e0e0e0;
    }

    .receipt-title {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 10px;
    }
    .receipt-info {
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }

    .empty {
      text-align: center;
      padding: 60px 20px;
      background-color: white;
      border-radius: 10px;
    }

    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    .btn-edit {
      background-color: #007bff;
      color: white;
    }
    .btn-delete {
      background-color: #dc3545;
      color: white;
    }
  </style>
</head>
<body>
<div class="header">
  <button class="back-btn" onclick="history.back()">â† ë’¤ë¡œ</button>
  <h1 th:text="${travel.city + ', ' + travel.country}">íŒŒë¦¬, í”„ë‘ìŠ¤</h1>
  <div class="travel-info"
       th:text="'ê¸°ê°„: ' + ${#temporals.format(travel.startDate, 'yyyy-MM-dd')} + ' ~ ' + ${#temporals.format(travel.endDate, 'yyyy-MM-dd')}">
    ê¸°ê°„: 2024-05-01 ~ 2024-05-04
  </div>
  <div class="travel-amount" th:text="'ì´ ì§€ì¶œ: ' + ${#numbers.formatInteger(travel.totalAmount, 0, 'COMMA')} + 'ì›'">
    ì´ ì§€ì¶œ: 1,250,000ì›
  </div>
  <div th:if="${travel.memo != null and !travel.memo.isBlank()}"
       class="travel-info"
       style="margin-top: 10px; font-style: italic;"
       th:text="'ë©”ëª¨: ' + ${travel.memo}">
    ë©”ëª¨: ì¦ê±°ìš´ ì—¬í–‰
  </div>

  <!-- ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ (ë³¸ì¸ ì—¬í–‰ë§Œ) -->
  <div th:if="${isOwner}" class="btn-group">
    <button class="btn btn-edit"
            th:onclick="'location.href=\'/travels/' + ${travel.travelId} + '/edit\''">
      ì—¬í–‰ ì •ë³´ ìˆ˜ì •
    </button>
    <form th:action="@{/travels/{id}/delete(id=${travel.travelId})}"
          method="post"
          style="display: inline;"
          onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
      <button type="submit" class="btn btn-delete">ì—¬í–‰ ì‚­ì œ</button>
    </form>
  </div>
</div>

<h2 class="section-title">ğŸ“ ì˜ìˆ˜ì¦ ëª©ë¡</h2>

<!-- ì˜ìˆ˜ì¦ ëª©ë¡ -->
<div th:if="${receipts != null and !receipts.empty}">
  <div th:each="receipt : ${receipts}" class="receipt-card">
    <div class="receipt-title" th:text="${receipt.storeName}">ìŠ¤íƒ€ë²…ìŠ¤</div>
    <div class="receipt-info" th:text="'ê²°ì œì¼: ' + ${#temporals.format(receipt.paidAt, 'yyyy-MM-dd HH:mm')}">
      ê²°ì œì¼: 2024-05-01 14:30
    </div>
    <div class="receipt-info" th:text="'ê¸ˆì•¡: ' + ${#numbers.formatInteger(receipt.amount, 0, 'COMMA')} + 'ì›'">
      ê¸ˆì•¡: 12,000ì›
    </div>
    <div th:if="${receipt.category != null}"
         class="receipt-info"
         th:text="'ì¹´í…Œê³ ë¦¬: ' + ${receipt.category}">
      ì¹´í…Œê³ ë¦¬: ì‹ë¹„
    </div>
    <div th:if="${receipt.description != null and !receipt.description.isBlank()}"
         class="receipt-info"
         style="margin-top: 10px; font-style: italic;"
         th:text="'ì„¤ëª…: ' + ${receipt.description}">
      ì„¤ëª…: ì•„ì¹¨ ì»¤í”¼
    </div>
  </div>
</div>

<!-- ë¹ˆ ìƒíƒœ -->
<div th:if="${receipts == null or receipts.empty}" class="empty">
  <h3>ğŸ“­ ì˜ìˆ˜ì¦ì´ ì—†ìŠµë‹ˆë‹¤</h3>
  <p>ê°€ê³„ë¶€ ì‹œìŠ¤í…œì—ì„œ ì˜ìˆ˜ì¦ì„ ì—…ë¡œë“œí•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
</div>
</body>
</html>