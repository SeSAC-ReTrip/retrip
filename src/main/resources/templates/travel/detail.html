<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ì—¬í–‰ ìƒì„¸ - Retrip</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background-color: #f5f5f5; }
    .navbar {
      background-color: white;
      padding: 15px 30px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .navbar-brand { font-size: 1.5em; font-weight: bold; color: #007bff; text-decoration: none; }
    .nav-links { display: flex; gap: 20px; }
    .nav-links a { text-decoration: none; color: #333; padding: 8px 16px; border-radius: 5px; }
    .container { max-width: 1000px; margin: 30px auto; padding: 0 20px; }
    .travel-header {
      background-color: white;
      padding: 40px;
      border-radius: 10px;
      margin-bottom: 30px;
    }
    .title { font-size: 2em; color: #007bff; margin-bottom: 15px; }
    .dates { color: #666; font-size: 1.1em; margin-bottom: 10px; }
    .amount { font-size: 1.3em; color: #28a745; font-weight: bold; margin-bottom: 20px; }
    .memo { color: #333; line-height: 1.6; margin: 20px 0; }
    .actions { display: flex; gap: 10px; }
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
    }
    .btn-primary { background-color: #007bff; color: white; }
    .btn-danger { background-color: #dc3545; color: white; }
    .posts-section {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
    }
    .section-title { font-size: 1.5em; margin-bottom: 20px; }
    .post-card {
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 15px;
      text-decoration: none;
      color: inherit;
      display: block;
    }
    .post-card:hover { background-color: #f9f9f9; }
    .post-title { font-weight: bold; margin-bottom: 5px; }
    .post-date { color: #666; font-size: 0.9em; }
    .empty { text-align: center; padding: 40px; color: #666; }
    .logout-btn {
      padding: 8px 20px;
      background-color: #dc3545;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div class="navbar">
  <a th:href="@{/home}" class="navbar-brand">ğŸŒ Retrip</a>
  <div class="nav-links">
    <a th:href="@{/posts}">ğŸ“° í”¼ë“œ</a>
    <a th:href="@{/travels}">âœˆï¸ ë‚´ ì—¬í–‰</a>
    <a th:href="@{/users/me}">ğŸ‘¤ ë‚´ ì •ë³´</a>
  </div>
  <form th:action="@{/logout}" method="post" style="margin: 0;">
    <button type="submit" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
  </form>
</div>

<div class="container">
  <div class="travel-header">
    <div class="title" th:text="${travel.city + ', ' + travel.country}">íŒŒë¦¬, í”„ë‘ìŠ¤</div>
    <div class="dates"
         th:text="${#temporals.format(travel.startDate, 'yyyy-MM-dd')} + ' ~ ' + ${#temporals.format(travel.endDate, 'yyyy-MM-dd')}">
      2024-05-01 ~ 2024-05-04
    </div>
    <div class="amount" th:text="'ì´ ì§€ì¶œ: ' + ${#numbers.formatInteger(travel.totalAmount, 0, 'COMMA')} + 'ì›'">
      ì´ ì§€ì¶œ: 0ì›
    </div>
    <div class="memo" th:if="${travel.memo != null and !travel.memo.isBlank()}" th:text="${travel.memo}">
      ë©”ëª¨ ë‚´ìš©
    </div>

    <div th:if="${isOwner}" class="actions">
      <a th:href="@{/travels/{id}/edit(id=${travel.travelId})}" class="btn btn-primary">ìˆ˜ì •</a>
      <form th:action="@{/travels/{id}/delete(id=${travel.travelId})}" method="post"
            style="display: inline;" onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
        <button type="submit" class="btn btn-danger">ì‚­ì œ</button>
      </form>
      <a th:href="@{/posts/create(travelId=${travel.travelId})}" class="btn btn-primary">ê²Œì‹œê¸€ ì‘ì„±</a>
    </div>
  </div>

  <div class="posts-section">
    <h2 class="section-title">ì´ ì—¬í–‰ì˜ ê²Œì‹œê¸€</h2>

    <div th:if="${posts != null and !posts.empty}">
      <a th:each="post : ${posts}"
         th:href="@{/posts/{id}(id=${post.postId})}"
         class="post-card">
        <div class="post-title" th:text="${post.title}">ê²Œì‹œê¸€ ì œëª©</div>
        <div class="post-date" th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}">ë‚ ì§œ</div>
      </a>
    </div>

    <div th:if="${posts == null or posts.empty}" class="empty">
      <p>ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
      <a th:href="@{/posts/create}" class="btn btn-primary">ì²« ê²Œì‹œê¸€ ì‘ì„±í•˜ê¸°</a>
    </div>
  </div>
</div>
</body>
</html>